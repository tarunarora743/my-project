<!--
  Student Name:
  Student Number:
-->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>FlowTow</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <link rel="stylesheet" href="css/style.css" type="text/css">

    <!-- Include Handlebars from a CDN -->
    <script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script>
    <script src="./js/main.js" type=module defer></script>
  </head>
  <body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <nav id="topdiv">
          <ul id="logo">
              
              <li><a class="topmenu" href="#" >Home</a></li>
              
              
              <li><a class="topmenu" href="#!/all-posts" >All Posts</a></li>
              
              
              <li><a class="topmenu" href="#!/my-posts" >My Posts</a></li>
              
              
              <li><a class="topmenu" href="#whatis" >About</a></li>
              
          </ul>
      </nav>

    <div id="content">

      <div id="heading">
          
          <hgroup>
              <h1>Welcome to FlowTow!</h1>
          </hgroup>
      
          

      </div>
    </div>
    <div id="three-images">
      <script>
        var mydata = [];
        
          $(document).ready(function () {
            $.getJSON('js/sample.json', function(data) {
              for(i=0; i<data.length; i++){
                mydata.push(data[i]);
              } 
              for (i=0; i<3; i++){
                var index = Math.floor(Math.random() * mydata.length);
                var div1 = document.createElement('div');        // Create an <img> element.
                div1.innerHTML = '<img src='+mydata[index].p_url+'>' + '<a class="caption">'+ mydata[index].p_caption + ' by ' + mydata[index].p_author + ' <b>' + mydata[index].p_likes + '</b></a>';                 //giving the image url from data
                document.getElementById('three-images').appendChild(div1);  //appending the image to the div
              }
            });
          });          
      </script>
    </div>

    <div id="target">
      <div class="containerdiv" id="lefthandsidediv"> <!--This is the left hand side box for recent posts-->
        <h4 style="text-align: center; color: rgb(114, 70, 131);">Recent Posts</h4>
        
        <script> //script for adding images by timestamp.. involves sorting the array of objects with their timestamp
          var mydata3 = [];
          
            $(document).ready(function () {
              $.getJSON('js/sample.json', function(data) {
                for(i=0; i<data.length; i++){
                  mydata3.push(data[i]);
                } 
                console.log(mydata3);
                mydata3.sort(function(a,b){
                  return b.published_at - a.published_at;
                });
                for (i=0; i<10; i++){
                  var div4 = document.createElement('div');        // Create an <div> element.
                  div4.className = "divforposts"
                  div4.innerHTML = '<img src='+mydata3[i].p_url+'>' + '<a style="padding-bottom: 20px;">'+ mydata3[i].p_caption + ' by ' + mydata3[i].p_author + ' &nbsp &nbsp &nbsp' + mydata3[i].published_at.split("T" , 1) + ' <span style="color:blue;";><b>' + ' &nbsp' + mydata3[i].p_likes + '</b></span></a><button style="float: right;">Like</button>';                 //giving the image url from data
                  document.getElementById('lefthandsidediv').appendChild(div4);  //appending the element to parent div
                }
              });
            });          
        </script>
      </div>


      <!--This is fo popular posts-->
      <div class="containerdiv" id="righthandsidediv"> 
        <h4 style="text-align: center; color: rgb(114, 70, 131);">Popular Posts</h4>
        <script> //script for adding images by popularity.. involves sorting the array of objects(posts)
          var mydata2 = [];
          
            $(document).ready(function () {
              $.getJSON('js/sample.json', function(data) {
                for(i=0; i<data.length; i++){
                  mydata2.push(data[i]);
                } 
                console.log(mydata2);
                mydata2.sort(function(a,b){
                  return b.p_likes - a.p_likes;
                });
                for (i=0; i<10; i++){
                  var div3 = document.createElement('div');        // Create an <div> element.
                  div3.className = "divforposts"
                  div3.innerHTML = '<img src='+mydata2[i].p_url+'>' + '<a style="padding-bottom: 20px;">'+ mydata2[i].p_caption + ' by ' + mydata2[i].p_author + ' <b>' + mydata2[i].p_likes + '</b></a><button style="float: right;">Like</button>';                 //giving the image url from data
                  document.getElementById('righthandsidediv').appendChild(div3);  //appending the element to parent div
                }
              });
            });          
        </script>
      </div>
    </div>

      <!-- about section-->
  <section id="whatis">
    <div>
      <h3>What is FlowTow?</h3>
      <script>
       

        $(document).ready(function () {
          $.ajax({
            url: "http://localhost:1337/restaurants",
            type: "GET",
            success: function(result){
              console.log(result)
            },
            error: function(error){
              console.log(error);
            }
          }) 

          }); 
           
      </script>
      <a>FlowTow is new, exciting, image sharing service like nothing you've seen before!</a>
      <br>
      <a>FlowTow supports logging in users, posting images, making comments and viewing images in various ways.</a>
    </div>
  </section>

  <footer>

    <div id="social">
      <ul class="social2">
        <li id="social-twitter"><a href="#">Twitter</a></li>
        <li id="social-facebook"><a href="#">Facebook</a></li>
        <li id="social-instagram"><a href="#">Instagram</a></li>
      </ul>
    </div>

    <ul class="footer-tos social2">
      <li><a href="#">Terms</a></li>
      <li><a href="#">Privacy</a></li>
      <li><a href="#">Cookies</a></li>
    </ul>
    
    <p id="copyright">All content and images subject to copyright &copy; COMP2110/6110 FlowTow 2021.</p>
  </footer>


  <!-- Templates -->


  

  </body>
</html>
